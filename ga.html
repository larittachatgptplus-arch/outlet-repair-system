<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard GA - Sistem Perbaikan</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ‘¨â€ğŸ’¼ Dashboard General Affair (GA)</h1>
            <p>Kelola permohonan perbaikan dan monitoring</p>
            <button class="btn btn-warning" onclick="window.location.href='index.html'">â¬… Kembali ke Home</button>
        </header>

        <main class="main-content">
            <!-- Tab Navigation -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('dashboard')">ğŸ“Š Dashboard</button>
                <button class="tab-btn" onclick="switchTab('pending')">â³ Pending (<span id="countPending">0</span>)</button>
                <button class="tab-btn" onclick="switchTab('progress')">ğŸš§ Progress (<span id="countProgress">0</span>)</button>
                <button class="tab-btn" onclick="switchTab('completed')">âœ… Done (<span id="countCompleted">0</span>)</button>
            </div>

            <!-- Tab 1: Dashboard & Report -->
            <div id="dashboardTab" class="tab-content active">
                <h2>ğŸ“Š Dashboard Overview</h2>
                
                <div id="statsContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
                    <div class="stat-card stat-purple">
                        <h3 id="totalPending">-</h3>
                        <p>Pending Approval</p>
                    </div>
                    <div class="stat-card stat-pink">
                        <h3 id="totalProgress">-</h3>
                        <p>On Progress</p>
                    </div>
                    <div class="stat-card stat-blue">
                        <h3 id="totalCompleted">-</h3>
                        <p>Completed</p>
                    </div>
                    <div class="stat-card stat-orange">
                        <h3 id="totalUrgent">-</h3>
                        <p>Urgent</p>
                    </div>
                </div>

                <div style="margin-top: 40px;">
                    <h3>ğŸ” Filter Ticket</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <select id="filterHub" onchange="loadAllTickets()">
                            <option value="">Semua HUB</option>
                        </select>
                        <select id="filterStatus" onchange="loadAllTickets()">
                            <option value="">Semua Status</option>
                            <option value="Menunggu Approval">Menunggu Approval</option>
                            <option value="Dijadwalkan">Dijadwalkan</option>
                            <option value="On Progress">On Progress</option>
                            <option value="Selesai">Selesai</option>
                            <option value="Ditolak">Ditolak</option>
                        </select>
                        <input type="text" id="searchTicket" placeholder="Cari Ticket ID..." onkeyup="searchTickets()">
                    </div>
                </div>

                <div id="allTicketsContainer" style="margin-top: 30px;">
                    <p class="text-center text-muted">Loading tickets...</p>
                </div>
            </div>

            <!-- Tab 2: Pending Approval -->
            <div id="pendingTab" class="tab-content">
                <h2>â³ Ticket Pending Approval</h2>
                <p class="subtitle">Review dan approve/reject ticket yang masuk dari outlet</p>
                
                <div id="pendingContainer">
                    <p class="text-center text-muted">Loading pending tickets...</p>
                </div>
            </div>

            <!-- Tab 3: On Progress -->
            <div id="progressTab" class="tab-content">
                <h2>ğŸš§ Ticket On Progress</h2>
                <p class="subtitle">Monitor dan update status pekerjaan perbaikan</p>
                
                <div id="progressContainer">
                    <p class="text-center text-muted">Loading progress tickets...</p>
                </div>
            </div>

            <!-- Tab 4: Completed -->
            <div id="completedTab" class="tab-content">
                <h2>âœ… Ticket Completed</h2>
                <p class="subtitle">Daftar ticket yang sudah selesai diperbaiki</p>
                
                <div id="completedContainer">
                    <p class="text-center text-muted">Loading completed tickets...</p>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2025 Laritta Bakery - Sistem Perbaikan Outlet</p>
        </footer>
    </div>

    <!-- Modal Approve -->
    <div id="approveModal" class="modal hidden" onclick="closeModal('approveModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>âœ… Approve Ticket</h3>
                <button class="close-btn" onclick="closeModal('approveModal')">&times;</button>
            </div>
            <div id="approveContent"></div>
        </div>
    </div>

    <!-- Modal Update Status -->
    <div id="updateModal" class="modal hidden" onclick="closeModal('updateModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>ğŸ”„ Update Status Ticket</h3>
                <button class="close-btn" onclick="closeModal('updateModal')">&times;</button>
            </div>
            <div id="updateContent"></div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="ga.js"></script>
</body>
</html>
